<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì‚°íƒ€ ë˜ê¸° â€“ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ê¸°ë¶€ í¬ë¼ìš°ë“œ í€ë”©</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg-dark: #020617;
      --panel: rgba(15, 23, 42, 0.96);
      --border-subtle: rgba(148, 163, 184, 0.6);
      --accent-red: #f97373;
      --accent-gold: #fbbf24;
      --accent-green: #22c55e;
      --text-subtle: #9ca3af;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1e293b 0%, #020617 55%);
      color: #e5e7eb;
      min-height: 100vh;
    }

    .app-root {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    header.app-header {
      width: 100%;
      max-width: 1120px;
      padding: 18px 16px 12px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .brand-mark {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      background: conic-gradient(from 180deg, #f97373, #fbbf24, #22c55e, #60a5fa, #f97373);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .brand-mark-inner {
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: #020617;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
    }

    .brand-name {
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      font-size: 0.8rem;
      color: #e5e7eb;
    }

    .header-meta {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 2px;
      font-size: 0.78rem;
      color: var(--text-subtle);
    }

    .badge-pill {
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      background: rgba(15, 23, 42, 0.9);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .view {
      width: 100%;
      max-width: 1120px;
      margin: 8px auto 24px;
      padding: 0 16px 16px;
      display: none;
    }

    .view.view--active {
      display: block;
    }

    /* ë©”ì¸ ì„ íƒ í™”ë©´ */

    .hero-card {
      margin-top: 16px;
      border-radius: 24px;
      padding: 24px 20px 20px;
      background: radial-gradient(circle at top, #111827 0%, #020617 60%);
      border: 1px solid var(--border-subtle);
      box-shadow: 0 22px 60px rgba(0, 0, 0, 0.8);
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1.2fr);
      gap: 20px;
    }

    @media (max-width: 768px) {
      .hero-card {
        grid-template-columns: 1fr;
      }
    }

    .hero-copy-eyebrow {
      font-size: 0.9rem;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--text-subtle);
    }

    .hero-copy-title {
      margin-top: 8px;
      font-size: clamp(1.8rem, 2.5vw, 2.4rem);
      font-weight: 700;
      line-height: 1.2;
    }

    .hero-copy-title span {
      color: var(--accent-gold);
    }

    .hero-copy-subtitle {
      margin-top: 10px;
      color: #d1d5db;
      font-size: 0.95rem;
      line-height: 1.7;
      max-width: 30rem;
    }

    .hero-actions {
      margin-top: 20px;
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .btn {
      border-radius: 999px;
      border: none;
      padding: 10px 18px;
      font-size: 0.9rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background: linear-gradient(135deg, #f97373, #fbbf24);
      color: #111827;
      font-weight: 600;
    }

    .btn-outline {
      background: transparent;
      color: #e5e7eb;
      border: 1px solid rgba(148, 163, 184, 0.8);
    }

    .hero-visual {
      position: relative;
      min-height: 180px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .hero-visual-card {
      width: 100%;
      max-width: 340px;
      border-radius: 20px;
      padding: 16px 16px 14px;
      background: radial-gradient(circle at top, #1f2937 0%, #020617 65%);
      border: 1px solid rgba(148, 163, 184, 0.7);
      box-shadow: 0 18px 40px rgba(0, 0, 0, 0.8);
      font-size: 0.86rem;
    }

    .hero-visual-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
    }

    .hero-visual-room {
      margin-top: 8px;
      border-radius: 14px;
      padding: 14px 10px 10px;
      background: radial-gradient(circle at top, #0f172a 0%, #020617 70%);
      position: relative;
      overflow: hidden;
      min-height: 90px;
    }

    /* ì‘ì€ íŠ¸ë¦¬+ë²½ë‚œë¡œ ìƒì§• */

    .tiny-tree {
      position: absolute;
      left: 14px;
      bottom: 10px;
      width: 40px;
      height: 60px;
    }
    .tiny-tree .cone {
      position: absolute;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
      width: 0;
      height: 0;
      border-left: 16px solid transparent;
      border-right: 16px solid transparent;
      border-bottom: 34px solid #047857;
    }
    .tiny-tree .trunk {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 10px;
      height: 10px;
      border-radius: 3px;
      background: #7c2d12;
    }
    .tiny-tree .star {
      position: absolute;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      width: 10px;
      height: 10px;
      background: radial-gradient(circle, #facc15 0%, #f97316 75%);
      border-radius: 50%;
      box-shadow: 0 0 10px rgba(250, 204, 21, 0.8);
      animation: twinkle 1.2s ease-in-out infinite alternate;
    }

    .tiny-fireplace {
      position: absolute;
      left: 80px;
      bottom: 8px;
      width: 56px;
      height: 40px;
      border-radius: 8px;
      background: #111827;
      border: 1px solid rgba(148, 163, 184, 0.7);
      overflow: hidden;
    }
    .tiny-fireplace .fire {
      position: absolute;
      inset: 8px 8px 6px 8px;
      border-radius: 8px;
      background: radial-gradient(circle at 50% 20%, #fed7aa 0%, #f97316 40%, #7c2d12 80%);
      animation: fire-flicker 1.1s ease-in-out infinite alternate;
    }

    @keyframes twinkle {
      0% { transform: translateX(-50%) scale(0.92); opacity: 0.8; }
      100% { transform: translateX(-50%) scale(1.08); opacity: 1; }
    }

    @keyframes fire-flicker {
      0% { transform: scale(0.96); filter: blur(0); }
      100% { transform: scale(1.03); filter: blur(1px); }
    }

    /* ê³µí†µ ë·° ìƒë‹¨ ë°” */

    .view-header {
      margin-top: 12px;
      margin-bottom: 10px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
    }

    .view-header-main {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .view-title {
      font-size: 1.05rem;
      font-weight: 600;
    }

    .view-subtitle {
      font-size: 0.82rem;
      color: var(--text-subtle);
    }

    .btn-ghost {
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      padding: 6px 12px;
      font-size: 0.8rem;
      background: rgba(15, 23, 42, 0.9);
      color: #e5e7eb;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    /* ì‚°íƒ€ ë·° ë ˆì´ì•„ì›ƒ */

    .santa-layout {
      border-radius: 22px;
      background: radial-gradient(circle at top, #020617 0%, #020617 65%);
      border: 1px solid var(--border-subtle);
      box-shadow: 0 22px 60px rgba(0, 0, 0, 0.85);
      padding: 16px;
      display: grid;
      grid-template-columns: minmax(0, 1.3fr) minmax(0, 1.7fr);
      gap: 16px;
    }

    @media (max-width: 880px) {
      .santa-layout {
        grid-template-columns: 1fr;
      }
    }

    .santa-letters {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .panel-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      font-size: 0.86rem;
    }

    .panel-header-title {
      font-weight: 600;
      font-size: 0.9rem;
    }

    .panel-header-sub {
      font-size: 0.8rem;
      color: var(--text-subtle);
    }

    .pill-counter {
      padding: 3px 9px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      font-size: 0.78rem;
    }

    .letter-list {
      margin-top: 4px;
      border-radius: 14px;
      background: rgba(15, 23, 42, 0.94);
      border: 1px solid rgba(55, 65, 81, 0.95);
      padding: 8px 6px;
      max-height: 380px;
      overflow-y: auto;
    }

    .letter-card {
      width: 100%;
      text-align: left;
      border-radius: 10px;
      padding: 8px 10px 9px;
      margin-bottom: 6px;
      border: 1px solid transparent;
      background: rgba(15, 23, 42, 0.95);
      display: grid;
      grid-template-columns: minmax(0, 1.8fr) minmax(0, 1fr);
      gap: 6px;
      cursor: pointer;
    }

    .letter-card:last-child {
      margin-bottom: 2px;
    }

    .letter-card:hover {
      border-color: rgba(148, 163, 184, 0.8);
      background: rgba(15, 23, 42, 0.98);
    }

    .letter-main {
      display: flex;
      flex-direction: column;
      gap: 2px;
      font-size: 0.85rem;
    }

    .letter-meta {
      font-size: 0.76rem;
      color: var(--text-subtle);
      display: flex;
      gap: 6px;
      flex-wrap: wrap;
    }

    .letter-wish {
      font-size: 0.82rem;
    }

    .letter-side {
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      justify-content: space-between;
      gap: 4px;
      font-size: 0.78rem;
    }

    .progress-bar {
      width: 100%;
      height: 5px;
      border-radius: 999px;
      background: rgba(31, 41, 55, 0.9);
      overflow: hidden;
    }

    .progress-bar-fill {
      height: 100%;
      border-radius: inherit;
      background: linear-gradient(90deg, var(--accent-red), var(--accent-gold));
      width: 0%;
      transition: width 0.25s ease;
    }

    .funding-label {
      font-size: 0.76rem;
      color: var(--text-subtle);
    }

    .chip {
      padding: 2px 6px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(75, 85, 99, 0.9);
      font-size: 0.7rem;
    }

    .chip-success {
      border-color: rgba(52, 211, 153, 0.9);
      color: #bbf7d0;
      background: rgba(22, 163, 74, 0.25);
    }

    .santa-map {
      border-radius: 16px;
      background: radial-gradient(circle at top, #020617 0%, #020617 65%);
      border: 1px solid rgba(55, 65, 81, 1);
      padding: 10px 10px 12px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .map-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.86rem;
    }

    .map-header strong {
      color: var(--accent-gold);
    }

    .map-caption {
      font-size: 0.78rem;
      color: var(--text-subtle);
    }

    .map-body {
      margin-top: 4px;
      border-radius: 14px;
      background: radial-gradient(circle at top, #020617 0%, #020617 60%);
      border: 1px solid rgba(31, 41, 55, 0.95);
      position: relative;
      min-height: 260px;
      overflow: hidden;
    }

    /* ëŒ€í•œë¯¼êµ­ ì§€ë„ ì‹¤ë£¨ì—£ ëŠë‚Œ (ë‹¨ìˆœí™”) */
    .korea-outline {
      position: absolute;
      inset: 10% 15%;
      margin: auto;
      border-radius: 999px;
      background:
        radial-gradient(circle at 40% 14%, #1f2937 0%, transparent 55%),
        radial-gradient(circle at 60% 50%, #0f172a 0%, transparent 55%),
        radial-gradient(circle at 40% 85%, #020617 0%, transparent 50%);
      filter: blur(1px);
      opacity: 0.9;
    }

    .map-star {
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: radial-gradient(circle, #fefce8 0%, #facc15 55%, transparent 80%);
      box-shadow: 0 0 18px rgba(250, 204, 21, 0.9);
      animation: star-blink 1.8s ease-in-out infinite alternate;
    }

    .map-star::after {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background: radial-gradient(circle, #ffffff 0%, transparent 60%);
      opacity: 0.7;
    }

    @keyframes star-blink {
      0% { transform: scale(0.7); opacity: 0.6; }
      100% { transform: scale(1.15); opacity: 1; }
    }

    /* ì•„ì´ í¸ì§€ ì“°ê¸° ë·° */

    .child-form-card {
      border-radius: 22px;
      background: radial-gradient(circle at top, #020617 0%, #020617 65%);
      border: 1px solid var(--border-subtle);
      box-shadow: 0 22px 60px rgba(0, 0, 0, 0.85);
      padding: 18px 18px 16px;
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.4fr);
      gap: 18px;
    }

    @media (max-width: 880px) {
      .child-form-card {
        grid-template-columns: 1fr;
      }
    }

    .child-copy {
      font-size: 0.9rem;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .child-copy-title {
      font-weight: 600;
    }

    .child-copy-text {
      font-size: 0.86rem;
      color: #d1d5db;
    }

    .child-copy-note {
      margin-top: 4px;
      font-size: 0.8rem;
      color: var(--text-subtle);
    }

    .child-form {
      font-size: 0.86rem;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .field-group {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .field-label {
      font-size: 0.82rem;
    }

    .field-label span.hint {
      font-size: 0.76rem;
      color: var(--text-subtle);
      margin-left: 4px;
    }

    input, select, textarea {
      border-radius: 10px;
      border: 1px solid rgba(75, 85, 99, 0.9);
      background: rgba(15, 23, 42, 0.97);
      color: #e5e7eb;
      padding: 7px 9px;
      font-size: 0.85rem;
      width: 100%;
    }

    textarea {
      min-height: 110px;
      resize: vertical;
    }

    input::placeholder, textarea::placeholder {
      color: #6b7280;
    }

    .child-form-actions {
      margin-top: 4px;
      display: flex;
      justify-content: flex-end;
      gap: 8px;
    }

    /* í† ìŠ¤íŠ¸ */

    .toast {
      position: fixed;
      left: 50%;
      bottom: 18px;
      transform: translateX(-50%);
      padding: 8px 13px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid rgba(148, 163, 184, 0.7);
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      gap: 8px;
      z-index: 30;
      backdrop-filter: blur(10px);
    }

    .toast.toast--hidden {
      display: none;
    }
  </style>
</head>
<body>
  <div class="app-root">
    <header class="app-header">
      <div class="brand">
        <div class="brand-mark">
          <div class="brand-mark-inner">ğŸ„</div>
        </div>
        <div>
          <div class="brand-name">TAEJU SANTA</div>
          <div style="font-size:0.78rem; color:var(--text-subtle);">
            í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì†Œì›ì„ ì‡ëŠ” ì‚°íƒ€ í”„ë¡œì íŠ¸
          </div>
        </div>
      </div>
      <div class="header-meta">
        <div class="badge-pill">
          <span>â‘¢ ì‚°íƒ€ ë˜ê¸°</span>
          <span style="opacity:0.9;">ê¸°ë¶€ í¬ë¼ìš°ë“œ í€ë”© + NFT ì¸ì¦ì„œ</span>
        </div>
        <div>ì—°íƒ„ ë‚˜ë¥´ê¸°ì²˜ëŸ¼ ê°€ë³ê²Œ, NFTë¡œ ë‚¨ê¸°ëŠ” ì˜¤ëŠ˜ì˜ ì‚°íƒ€ ê¸°ë¡ ğŸ…</div>
      </div>
    </header>

    <!-- ë©”ì¸ ì„ íƒ í™”ë©´ -->
    <main class="view view--active" id="view-main">
      <section class="hero-card">
        <div>
          <div class="hero-copy-eyebrow">ì‚°íƒ€ ë¯¸ì…˜ â‘¢</div>
          <h1 class="hero-copy-title">
            ë³´ìœ¡ì› ì•„ì´ë“¤ì˜ <span>í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì†Œì›</span>ì„<br />
            í•¨ê»˜ ì´ë£¨ëŠ” ì‚°íƒ€ê°€ ë˜ì–´ì£¼ì„¸ìš”.
          </h1>
          <p class="hero-copy-subtitle">
            ì•± ì•ˆì—ì„œ ì•„ì´ë“¤ì˜ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì†Œì› í¸ì§€ë¥¼ ì½ê³ , ì—¬ëŸ¬ ëª…ì´ í¬ë¼ìš°ë“œ
            í€ë”©ìœ¼ë¡œ í•œ ì†Œì›ì„ í•¨ê»˜ ì±„ì›Œì£¼ëŠ” êµ¬ì¡°ì…ë‹ˆë‹¤. ì†Œì›ì´ ì´ë¤„ì§€ë©´ ê°
            ì°¸ì—¬ìì—ê²ŒëŠ” NFT í˜•íƒœì˜ â€˜ì‚°íƒ€ ì¸ì¦ì„œâ€™ê°€ ë°œê¸‰ë¼ìš”.
          </p>

          <div class="hero-actions">
            <button class="btn btn-primary" id="btn-main-child">
              ì•„ì´ í¸ì§€ ì“°ê¸°
            </button>
            <button class="btn btn-outline" id="btn-main-santa">
              ì‚°íƒ€ê°€ ë˜ê¸°
            </button>
          </div>
        </div>

        <div class="hero-visual">
          <div class="hero-visual-card">
            <div class="hero-visual-card-header">
              <div style="font-size:0.86rem; font-weight:600;">ì˜¤ëŠ˜ì˜ ì‚°íƒ€ í˜„í™©</div>
              <div style="font-size:0.78rem; color:var(--text-subtle);">
                NFT ì¸ì¦ì„œ ìë™ ë°œê¸‰
              </div>
            </div>
            <div style="display:flex; justify-content:space-between; font-size:0.8rem; color:var(--text-subtle);">
              <span>ì™„ë£Œëœ ì†Œì› <strong id="summary-completed">0</strong>ê°œ</span>
              <span>ì°¸ì—¬ ì‚°íƒ€ <strong id="summary-santas">0</strong>ëª…</span>
            </div>
            <div class="hero-visual-room">
              <div class="tiny-tree">
                <div class="cone"></div>
                <div class="trunk"></div>
                <div class="star"></div>
              </div>
              <div class="tiny-fireplace">
                <div class="fire"></div>
              </div>
              <div style="position:absolute; right:12px; top:12px; font-size:0.78rem; text-align:right; color:var(--text-subtle); max-width:120px;">
                íŠ¸ë¦¬ ì•„ë˜ ì§€ë„ ìœ„ì—<br />ë³„ë“¤ì´ í•˜ë‚˜ì”© ì¼œì§€ê³  ìˆì–´ìš”.
              </div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <!-- ì‚°íƒ€ ë·° -->
    <main class="view" id="view-santa">
      <div class="view-header">
        <div class="view-header-main">
          <div class="view-title">ì‚°íƒ€ê°€ ë  í¸ì§€ë¥¼ ê³ ë¥´ê³ , í•¨ê»˜ ì±„ì›Œì£¼ì„¸ìš”.</div>
          <div class="view-subtitle">
            ì™¼ìª½ì—ì„œ ì•„ì´ë“¤ì˜ í¸ì§€ë¥¼ ê³ ë¥´ê³ , ì˜¤ë¥¸ìª½ ëŒ€í•œë¯¼êµ­ ì§€ë„ì—ì„œ ì§€ê¸ˆê¹Œì§€ ë„ì™€ì¤€ ì•„ì´ë“¤ì˜ ìˆ˜ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.
          </div>
        </div>
        <button class="btn-ghost" data-back-target="main">â† ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
      </div>

      <section class="santa-layout">
        <div class="santa-letters">
          <div class="panel-header">
            <div>
              <div class="panel-header-title">ì•„ì´ë“¤ì˜ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì†Œì› í¸ì§€</div>
              <div class="panel-header-sub">í•œ ì†Œì›ë‹¹ ì—¬ëŸ¬ ì‚°íƒ€ê°€ í•¨ê»˜ ì°¸ì—¬í•  ìˆ˜ ìˆì–´ìš”.</div>
            </div>
            <div class="pill-counter">
              ë‚¨ì€ ì†Œì› <span id="count-open-letters">0</span>ê°œ
            </div>
          </div>
          <div class="letter-list" id="letter-list">
            <!-- JSë¡œ ì±„ì›Œì§ -->
          </div>
          <div style="font-size:0.76rem; color:var(--text-subtle); margin-top:4px;">
            * â€œì´ ì†Œì› í•¨ê»˜ ì´ë£¨ê¸°â€ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´, ì´ ì†Œì›ì— ì‚°íƒ€ë¡œ ì°¸ì—¬í•œ ê²ƒìœ¼ë¡œ ê¸°ë¡ë©ë‹ˆë‹¤.
          </div>
        </div>

        <aside class="santa-map">
          <div class="map-header">
            <div>
              ì§€ê¸ˆê¹Œì§€ <strong id="helped-count">0</strong>ëª…ì˜ ì•„ì´ì—ê²Œ<br />
              ì‚°íƒ€ê°€ ë‹¤ë…€ê°”ì–´ìš”.
            </div>
            <div class="badge-pill" style="font-size:0.78rem;">
              <span>ë³„ í•˜ë‚˜ = í•œ ì•„ì´ì˜ ì†Œì›</span>
            </div>
          </div>
          <div class="map-caption">
            ë³´ìœ¡ì› ë° ì•„ì´ë“¤ì´ ì‚´ê³  ìˆëŠ” ì§€ì—­ì„ ê¸°ë°˜ìœ¼ë¡œ, ëŒ€í•œë¯¼êµ­ ì§€ë„ ìœ„ì— ë³„ì´ í•˜ë‚˜ì”© ì¼œì§‘ë‹ˆë‹¤.
          </div>

          <div class="map-body">
            <div class="korea-outline"></div>
            <div id="map-stars-container"></div>
          </div>
        </aside>
      </section>
    </main>

    <!-- ì•„ì´ í¸ì§€ ì“°ê¸° ë·° -->
    <main class="view" id="view-child">
      <div class="view-header">
        <div class="view-header-main">
          <div class="view-title">í¬ë¦¬ìŠ¤ë§ˆìŠ¤ì— ë°›ê³  ì‹¶ì€ ì†Œì›ì„ ì ì–´ì£¼ì„¸ìš”.</div>
          <div class="view-subtitle">
            ì´ í¸ì§€ëŠ” ì‚°íƒ€ê°€ ë˜ê³  ì‹¶ì€ ì‚¬ëŒë“¤ì´ ì½ê³ , ì—¬ëŸ¬ ëª…ì´ í•¨ê»˜ ì¡°ê¸ˆì”© í¬ë¼ìš°ë“œ í€ë”©ìœ¼ë¡œ ë„ì™€ì¤„ ê±°ì˜ˆìš”.
          </div>
        </div>
        <button class="btn-ghost" data-back-target="main">â† ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
      </div>

      <section class="child-form-card">
        <div class="child-copy">
          <div class="child-copy-title">ë‹¹ì‹ ì˜ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì†Œì›ì€ ë¬´ì—‡ì¸ê°€ìš”?</div>
          <p class="child-copy-text">
            ê¼­ ë¬¼ê±´ì´ ì•„ë‹ˆì–´ë„ ê´œì°®ì•„ìš”. ë”°ëœ»í•œ ì½”íŠ¸, ì±…, ì¥ë‚œê°, ìš´ë™í™”, í•™ì› ìˆ˜ê°•ê¶Œ,
            ê°€ì¡±ê³¼ì˜ ì‹ì‚¬, ë¬´ì—‡ì´ë“  ì§€ê¸ˆ ê°€ì¥ ê°–ê³  ì‹¶ì€ ì†Œì›ì„ ë“¤ë ¤ì£¼ì„¸ìš”.
          </p>
          <p class="child-copy-note">
            í¸ì§€ëŠ” ì‹¤ëª… ëŒ€ì‹  ì´ˆê¸°ë§Œ ê³µê°œë˜ê³ , ì‚°íƒ€ê°€ ë˜ë ¤ëŠ” ì‚¬ëŒì—ê²Œë§Œ ìƒì„¸ ë‚´ìš©ì´ ë³´ì—¬ìš”.
            ë‚˜ì¤‘ì— ì†Œì›ì´ ì´ë¤„ì§€ë©´, ê·¸ ì‚¬ì‹¤ë„ ì•± ì•ˆì—ì„œ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.
          </p>
        </div>

        <form class="child-form" id="child-form">
          <div class="field-group">
            <label class="field-label">
              ì´ë¦„ ë˜ëŠ” ë‹‰ë„¤ì„
              <span class="hint">(ì‹¤ëª… ëŒ€ì‹  ë‹‰ë„¤ì„ë„ ê´œì°®ì•„ìš”)</span>
            </label>
            <input name="childName" placeholder="ì˜ˆ: ì§€ìš°, í•˜ëŠ˜ì´, ì½”ì½”" required />
          </div>

          <div class="field-group">
            <label class="field-label">
              ë‚˜ì´
            </label>
            <input name="age" type="number" min="1" max="18" placeholder="ì˜ˆ: 9" required />
          </div>

          <div class="field-group">
            <label class="field-label">
              ì§€ì—­
              <span class="hint">(í˜„ì¬ ì‚´ê³  ìˆëŠ” ê³³)</span>
            </label>
            <select name="region" required>
              <option value="">ì§€ì—­ì„ ì„ íƒí•´ì£¼ì„¸ìš”</option>
              <option value="ì„œìš¸">ì„œìš¸</option>
              <option value="ê²½ê¸°/ì¸ì²œ">ê²½ê¸°/ì¸ì²œ</option>
              <option value="ê°•ì›">ê°•ì›</option>
              <option value="ì¶©ì²­">ì¶©ì²­</option>
              <option value="ì „ë¼">ì „ë¼</option>
              <option value="ê²½ìƒ">ê²½ìƒ</option>
              <option value="ì œì£¼">ì œì£¼</option>
            </select>
          </div>

          <div class="field-group">
            <label class="field-label">
              ë°›ê³  ì‹¶ì€ í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì†Œì›
              <span class="hint">(í•œ ë¬¸ì¥ìœ¼ë¡œ)</span>
            </label>
            <input
              name="wishTitle"
              placeholder="ì˜ˆ: ëˆˆ ì˜¤ëŠ” ë‚  ì‹ ê³  ë‚˜ê°ˆ ìƒˆ ìš´ë™í™”, ë™ìƒê³¼ í•¨ê»˜ ë‚˜ëˆ ë¨¹ì„ ì´ˆì½œë¦¿ ìƒì"
              required
            />
          </div>

          <div class="field-group">
            <label class="field-label">
              ì¡°ê¸ˆ ë” ìì„¸í•œ ì´ì•¼ê¸°
              <span class="hint">(ì‚°íƒ€ê°€ ì´í•´í•˜ê¸° ì‰½ë„ë¡)</span>
            </label>
            <textarea
              name="wishDetail"
              placeholder="ì™œ ì´ ì†Œì›ì„ ê°–ê²Œ ë˜ì—ˆëŠ”ì§€, ì§€ê¸ˆ ì–´ë–¤ ìƒí™©ì¸ì§€, ì‚°íƒ€ì—ê²Œ í•˜ê³  ì‹¶ì€ ë§ì„ ì ì–´ì£¼ì„¸ìš”."
              required
            ></textarea>
          </div>

          <div class="field-group">
            <label class="field-label">
              ëŒ€ëµ í•„ìš”í•œ ê¸ˆì•¡
              <span class="hint">(ëŒ€ëµì ì¸ ì¶”ì •ì¹˜ì—¬ë„ ê´œì°®ì•„ìš”)</span>
            </label>
            <input
              name="targetAmount"
              type="number"
              min="0"
              step="1000"
              placeholder="ì˜ˆ: 50000 (ìˆ«ìë§Œ)"
            />
          </div>

          <div class="child-form-actions">
            <button type="reset" class="btn btn-ghost">ë‹¤ì‹œ ì“¸ë˜ìš”</button>
            <button type="submit" class="btn btn-primary">í¸ì§€ ë³´ë‚´ê¸° âœ¨</button>
          </div>
        </form>
      </section>
    </main>
  </div>

  <!-- í† ìŠ¤íŠ¸ -->
  <div class="toast toast--hidden" id="toast">
    <span>âœ¨</span>
    <span id="toast-text">ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.</span>
  </div>

  <script>
    // ===== ìƒíƒœ & ì´ˆê¸° ë°ì´í„° =====
    const views = {
      main: document.getElementById("view-main"),
      santa: document.getElementById("view-santa"),
      child: document.getElementById("view-child"),
    };

    function showView(name) {
      Object.values(views).forEach(v => v.classList.remove("view--active"));
      views[name].classList.add("view--active");
    }

    document.getElementById("btn-main-child").addEventListener("click", () => {
      showView("child");
    });

    document.getElementById("btn-main-santa").addEventListener("click", () => {
      showView("santa");
    });

    document.querySelectorAll("[data-back-target]").forEach(btn => {
      btn.addEventListener("click", () => {
        const target = btn.getAttribute("data-back-target");
        showView(target);
      });
    });

    const toastEl = document.getElementById("toast");
    const toastTextEl = document.getElementById("toast-text");

    function showToast(message) {
      toastTextEl.textContent = message;
      toastEl.classList.remove("toast--hidden");
      toastEl.style.opacity = "1";
      toastEl.style.transform = "translateX(-50%) translateY(0)";
      setTimeout(() => {
        toastEl.style.opacity = "0";
        toastEl.style.transform = "translateX(-50%) translateY(6px)";
        setTimeout(() => toastEl.classList.add("toast--hidden"), 280);
      }, 1800);
    }

    // ì„ì‹œ ë”ë¯¸ ë°ì´í„°: ì‹¤ì œë¡œëŠ” APIì—ì„œ ë°›ì•„ì˜¤ëŠ” êµ¬ì¡° ì˜ˆìƒ
    let letters = [
      {
        id: 1,
        childName: "ì§€ìš°",
        age: 9,
        region: "ì„œìš¸",
        wishTitle: "íƒœì–´ë‚˜ì„œ ì²˜ìŒ ê°€ì ¸ë³´ëŠ” ìê¸°ë§Œì˜ ì±…ìƒ",
        wishDetail: "ê³µë¶€ë¥¼ ì¹¨ëŒ€ì—ì„œ í•˜ë‹¤ ë³´ë‹ˆ í—ˆë¦¬ë„ ì•„í”„ê³  ì§‘ì¤‘ì´ ì˜ ì•ˆ ë¼ìš”. ì‘ì€ ì±…ìƒì´ ìˆìœ¼ë©´ ì¢‹ê² ì–´ìš”.",
        targetAmount: 80000,
        fundedPercent: 40,
        helpedCount: 5,
        completed: false,
      },
      {
        id: 2,
        childName: "í•˜ëŠ˜",
        age: 11,
        region: "ê²½ê¸°/ì¸ì²œ",
        wishTitle: "ëˆˆ ì˜¤ëŠ” ë‚  ì‹ ê³  ë‚˜ê°ˆ ìš´ë™í™”",
        wishDetail: "ë°œì´ ë§ì´ ì»¤ì ¸ì„œ ìš´ë™í™”ê°€ ë‹¤ ì‘ì•„ìš”. ì²´ìœ¡ ì‹œê°„ì— ìš´ë™í™”ë¥¼ ë¹Œë ¤ ì‹ ê¸°ë„ í•´ìš”.",
        targetAmount: 60000,
        fundedPercent: 70,
        helpedCount: 8,
        completed: false,
      },
      {
        id: 3,
        childName: "ìœ ë‚˜",
        age: 7,
        region: "ì „ë¼",
        wishTitle: "ë™ìƒê³¼ ë‚˜ëˆ  ë¨¹ì„ í° ì´ˆì½œë¦¿ ìƒì",
        wishDetail: "ë™ìƒì´ ì´ˆì½œë¦¿ì„ ì •ë§ ì¢‹ì•„í•˜ëŠ”ë°, í° ìƒìë¥¼ í•œ ë²ˆë„ ë°›ì•„ ë³¸ ì ì´ ì—†ì–´ìš”.",
        targetAmount: 30000,
        fundedPercent: 100,
        helpedCount: 15,
        completed: true,
      },
      {
        id: 4,
        childName: "ë¯¼ì¤€",
        age: 10,
        region: "ê²½ìƒ",
        wishTitle: "ì¶•êµ¬ë¥¼ ë°°ìš¸ ìˆ˜ ìˆëŠ” í•™ì› 1ê°œì›” ì´ìš©ê¶Œ",
        wishDetail: "í•™êµ ìš´ë™ì¥ì—ì„œ ì¹œêµ¬ë“¤ê³¼ ì¶•êµ¬í•  ë•Œ ë„ˆë¬´ ì¦ê±°ìš´ë°, ì œëŒ€ë¡œ ë°°ìš°ê³  ì‹¶ì–´ìš”.",
        targetAmount: 90000,
        fundedPercent: 30,
        helpedCount: 3,
        completed: false,
      },
    ];

    let totalSantas = 0; // ì‹¤ì œ ì„œë¹„ìŠ¤ë¼ë©´ ì°¸ì—¬ì ìˆ˜ ì¹´ìš´íŠ¸

    const letterListEl = document.getElementById("letter-list");
    const countOpenLettersEl = document.getElementById("count-open-letters");
    const summaryCompletedEl = document.getElementById("summary-completed");
    const summarySantasEl = document.getElementById("summary-santas");
    const helpedCountEl = document.getElementById("helped-count");
    const mapStarsContainer = document.getElementById("map-stars-container");

    function renderLetters() {
      letterListEl.innerHTML = "";
      const fragment = document.createDocumentFragment();

      letters.forEach(letter => {
        const card = document.createElement("button");
        card.type = "button";
        card.className = "letter-card";
        card.dataset.id = letter.id;

        const main = document.createElement("div");
        main.className = "letter-main";
        const title = document.createElement("div");
        title.textContent = letter.wishTitle;
        const meta = document.createElement("div");
        meta.className = "letter-meta";
        meta.innerHTML = `
          <span>${letter.region}</span>
          <span>${letter.childName} (${letter.age}ì„¸)</span>
        `;
        const wish = document.createElement("div");
        wish.className = "letter-wish";
        wish.textContent = letter.wishDetail;

        main.appendChild(title);
        main.appendChild(meta);
        main.appendChild(wish);

        const side = document.createElement("div");
        side.className = "letter-side";

        const progressWrap = document.createElement("div");
        progressWrap.className = "progress-bar";
        const progressFill = document.createElement("div");
        progressFill.className = "progress-bar-fill";
        progressFill.style.width = Math.min(letter.fundedPercent, 100) + "%";
        progressWrap.appendChild(progressFill);

        const fundingLabel = document.createElement("div");
        fundingLabel.className = "funding-label";
        const amountText = letter.targetAmount
          ? (letter.targetAmount / 1000).toLocaleString("ko-KR") + "ì²œ ì› ëª©í‘œ"
          : "ëª©í‘œ ê¸ˆì•¡ ë¯¸ê¸°ì…";
        fundingLabel.textContent = `${amountText} Â· í˜„ì¬ ${letter.fundedPercent}%`;

        const statusRow = document.createElement("div");
        statusRow.style.display = "flex";
        statusRow.style.alignItems = "center";
        statusRow.style.gap = "6px";

        const chip = document.createElement("span");
        chip.className = "chip" + (letter.completed ? " chip-success" : "");
        chip.textContent = letter.completed ? "ì†Œì› ì™„ë£Œ" : "ì‚°íƒ€ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘";

        const helperInfo = document.createElement("span");
        helperInfo.style.fontSize = "0.74rem";
        helperInfo.style.color = "var(--text-subtle)";
        helperInfo.textContent = `ì°¸ì—¬ ì‚°íƒ€ ${letter.helpedCount}ëª…`;

        statusRow.appendChild(chip);
        statusRow.appendChild(helperInfo);

        side.appendChild(progressWrap);
        side.appendChild(fundingLabel);
        side.appendChild(statusRow);

        card.appendChild(main);
        card.appendChild(side);

        card.addEventListener("click", () => {
          handleFund(letter.id);
        });

        fragment.appendChild(card);
      });

      letterListEl.appendChild(fragment);

      const openCount = letters.filter(l => !l.completed).length;
      const completedCount = letters.filter(l => l.completed).length;
      countOpenLettersEl.textContent = openCount;
      summaryCompletedEl.textContent = completedCount;
      summarySantasEl.textContent = totalSantas;
      helpedCountEl.textContent = completedCount; // ë³„ = ì™„ë£Œëœ ì†Œì› ê°œìˆ˜
      renderStars(completedCount);
    }

    // ê°„ë‹¨í•œ í¬ë¼ìš°ë“œ í€ë”© ì°¸ì—¬ ì‹œë®¬ë ˆì´ì…˜
    function handleFund(id) {
      const letter = letters.find(l => l.id === id);
      if (!letter) return;

      totalSantas += 1;
      letter.helpedCount += 1;

      // ì´ë¯¸ ì™„ë£Œëœ ì†Œì›ì€ "ì¶”ê°€ ê¸°ì—¬"ë§Œ ë°˜ì˜
      if (letter.completed) {
        showToast("ì´ë¯¸ ì´ë¤„ì§„ ì†Œì›ì´ì—ìš”. ê·¸ë˜ë„ ë§ˆìŒì€ ì˜ ì „ë‹¬ëì–´ìš”. ğŸ’›");
      } else {
        letter.fundedPercent += 25; // í•œ ë²ˆ ì°¸ì—¬ ì‹œ 25%ì”© ìŒ“ì´ê²Œ (ì˜ˆì‹œê°’)

        if (letter.fundedPercent >= 100) {
          letter.fundedPercent = 100;
          letter.completed = true;
          showToast("ì´ ì†Œì›ì´ ëª¨ë‘ ì±„ì›Œì¡Œì–´ìš”! ì‚°íƒ€ ì¸ì¦ì„œê°€ ë°œê¸‰ë©ë‹ˆë‹¤. ğŸ…");
        } else {
          showToast("ì´ ì†Œì›ì„ í•¨ê»˜ ì±„ì› ì–´ìš”. ì‚°íƒ€ ì¸ì¦ì„œì— ê¸°ë¡ë  ê±°ì˜ˆìš”. âœ¨");
        }
      }

      renderLetters();
    }

    // ëŒ€í•œë¯¼êµ­ ì§€ë„ ìœ„ì— ë³„ ì°ê¸°
    function renderStars(count) {
      mapStarsContainer.innerHTML = "";
      const fragment = document.createDocumentFragment();

      for (let i = 0; i < count; i++) {
        const star = document.createElement("div");
        star.className = "map-star";

        // ì§€ë„ ì•ˆì—ì„œ ëŒ€ëµì ì¸ ìœ„ì¹˜ ë¶„í¬ (ì„œìš¸/ìˆ˜ë„ê¶Œ ìª½ì— ì¢€ ë” ëª°ë¦¬ê²Œ ì•½ê°„ ì¹˜ìš°ì¹  ìˆ˜ë„ ìˆìŒ)
        const top = 18 + Math.random() * 60;   // 18% ~ 78%
        const left = 22 + Math.random() * 52;  // 22% ~ 74%
        star.style.top = top + "%";
        star.style.left = left + "%";

        // ê¹œë¹¡ì„ íƒ€ì´ë° ë‹¤ë¥´ê²Œ
        const delay = (Math.random() * 1.8).toFixed(2);
        star.style.animationDelay = delay + "s";

        fragment.appendChild(star);
      }

      mapStarsContainer.appendChild(fragment);
    }

    // ì•„ì´ í¸ì§€ ì‘ì„± í¼
    const childForm = document.getElementById("child-form");
    childForm.addEventListener("submit", (e) => {
      e.preventDefault();
      const formData = new FormData(childForm);
      const childName = formData.get("childName").trim();
      const age = Number(formData.get("age"));
      const region = formData.get("region");
      const wishTitle = formData.get("wishTitle").trim();
      const wishDetail = formData.get("wishDetail").trim();
      const targetAmount = Number(formData.get("targetAmount")) || 0;

      const newLetter = {
        id: Date.now(),
        childName,
        age,
        region,
        wishTitle,
        wishDetail,
        targetAmount,
        fundedPercent: 0,
        helpedCount: 0,
        completed: false,
      };

      letters.unshift(newLetter);
      childForm.reset();
      showToast("í¸ì§€ê°€ ì˜ ë„ì°©í–ˆì–´ìš”. ê³§ ì‚°íƒ€ë“¤ì´ ì½ì„ ê±°ì˜ˆìš”. ğŸ„");
      renderLetters();
      showView("santa");
    });

    // ì´ˆê¸° ë Œë”ë§
    renderLetters();
  </script>
</body>
</html>
